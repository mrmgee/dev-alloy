"use strict";var _createClass=function(){function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}();function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function debounce(n,s,o){var a=void 0;return function(){var t=this,i=arguments,e=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||n.apply(t,i)},s),e&&n.apply(t,i)}}var Entry=function(){function i(t){_classCallCheck(this,i),this.DOM={el:t},this.init()}return _createClass(i,[{key:"init",value:function(){this.DOM.title=this.DOM.el.querySelector(".section__title-inner"),charming(this.DOM.title),this.DOM.titleLetters=this.DOM.title.querySelectorAll("span"),this.DOM.topbar=document.querySelector(".menu__topbar"),this.DOM.pagination=document.querySelector(".section__index"),this.DOM.navigation=document.querySelector(".section__nav"),this.DOM.description=this.DOM.el.querySelector(".section__description"),this.DOM.description_inner=this.DOM.el.querySelector(".section__description-inner"),this.DOM.img=this.DOM.el.querySelector(".section__img > .section__img-inner"),this.DOM.img_2=this.DOM.el.querySelector(".section__img_2 > .section__img-inner"),this.DOM.block=this.DOM.el.querySelector(".section__block > .section__block-inner"),this.DOM.block_2=this.DOM.el.querySelector(".section__block_2 > .section__block-inner"),this.PageInAnimation(),this.inlineView()}},{key:"show",value:function(t){return this.isHidden=!1,this.toggle(t)}},{key:"hide",value:function(t){return this.isHidden=!0,this.toggle(t)}},{key:"toggle",value:function(t){return this.direction=t,Promise.all([this.DOM.title&&this.toggleTitle(),this.DOM.description&&this.toggleDescription(),this.DOM.img&&this.toggleImg(),this.DOM.img_2&&this.toggleImg_2(),this.DOM.block&&this.toggleBlock(),this.DOM.block_2&&this.toggleBlock_2()])}},{key:"toggleTitle",value:function(){var e=this;return anime.remove(this.DOM.titleLetters),anime({targets:this.DOM.titleLetters,duration:settings.title.duration,delay:function(t,i){return 30*i+settings.title.delay},easing:settings.title.easing,translateY:this.isHidden?[0,"next"===this.direction?"100%":"-100%"]:["next"===this.direction?"-100%":"100%",0],opacity:{value:this.isHidden?0:1,duration:1,delay:function(t,i){return e.isHidden?settings.title.duration+settings.title.delay:settings.title.delay}}}).finished}},{key:"toggleDescription",value:function(){return anime.remove(this.DOM.description),anime({targets:this.DOM.description,duration:settings.description.duration,delay:this.isHidden?settings.description.delay:.5*settings.description.duration+settings.description.delay,easing:settings.description.easing,translateY:this.isHidden?[0,"next"===this.direction?"5%":"-5%"]:["next"===this.direction?"-5%":"5%",0],opacity:this.isHidden?0:1}).finished}},{key:"toggleImg",value:function(){return this.DOM.img.style.transformOrigin=settings.img.horizontal&&!this.isHidden?this.direction===settings.img.direction?"100%":"0%":settings.img.horizontal||this.isHidden?"50% 50%":"50% "+(this.direction===settings.img.direction?100:0)+"%",anime.remove(this.DOM.img),anime({targets:this.DOM.img,duration:settings.img.duration,delay:settings.img.delay,easing:settings.img.easing,translateX:this.isHidden?["0%",this.direction===settings.img.direction?(settings.img.horizontal?100:0)+"%":-1*(settings.img.horizontal?100:0)+"%"]:[this.direction===settings.img.direction?-1*(settings.img.horizontal?100:0)+"%":(settings.img.horizontal?100:0)+"%","0%"],translateY:this.isHidden?["0%",this.direction===settings.img.direction?(settings.img.horizontal?0:100)+"%":-1*(settings.img.horizontal?0:100)+"%"]:[this.direction===settings.img.direction?-1*(settings.img.horizontal?0:100)+"%":(settings.img.horizontal?0:100)+"%","0%"],scale:this.isHidden?1:[1.8,1],opacity:{value:this.isHidden?0:1,duration:1,delay:this.isHidden?settings.img.duration+settings.img.delay:settings.img.delay}}).finished}},{key:"toggleImg_2",value:function(){return this.DOM.img_2.style.transformOrigin=settings.img_2.horizontal&&!this.isHidden?this.direction===settings.img_2.direction?"100%":"0%":settings.img_2.horizontal||this.isHidden?"50% 50%":"50% "+(this.direction===settings.img_2.direction?100:0)+"%",anime.remove(this.DOM.img_2),anime({targets:this.DOM.img_2,duration:settings.img_2.duration,delay:settings.img_2.delay,easing:settings.img_2.easing,translateX:this.isHidden?["0%",this.direction===settings.img_2.direction?(settings.img_2.horizontal?100:0)+"%":-1*(settings.img_2.horizontal?100:0)+"%"]:[this.direction===settings.img_2.direction?-1*(settings.img_2.horizontal?100:0)+"%":(settings.img_2.horizontal?100:0)+"%","0%"],translateY:this.isHidden?["0%",this.direction===settings.img_2.direction?(settings.img_2.horizontal?0:100)+"%":-1*(settings.img_2.horizontal?0:100)+"%"]:[this.direction===settings.img_2.direction?-1*(settings.img_2.horizontal?0:100)+"%":(settings.img_2.horizontal?0:100)+"%","0%"],scale:this.isHidden?1:[1.8,1],opacity:{value:this.isHidden?0:1,duration:1,delay:this.isHidden?settings.img_2.duration+settings.img_2.delay:settings.img_2.delay}}).finished}},{key:"toggleBlock",value:function(){var e=this;return anime.remove(this.DOM.block),anime({targets:[this.DOM.block,this.DOM.block.children],duration:settings.block.duration,delay:settings.block.delay,easing:settings.block.easing,translateX:this.isHidden?["0%",this.direction===settings.block.direction?(settings.block.horizontal?100:0)+"%":-1*(settings.block.horizontal?100:0)+"%"]:[this.direction===settings.block.direction?-1*(settings.block.horizontal?100:0)+"%":(settings.block.horizontal?100:0)+"%","0%"],translateY:this.isHidden?["0%",this.direction===settings.block.direction?(settings.block.horizontal?0:100)+"%":-1*(settings.block.horizontal?0:100)+"%"]:[this.direction===settings.block.direction?-1*(settings.block.horizontal?0:100)+"%":(settings.block.horizontal?0:100)+"%","0%"],opacity:{value:this.isHidden?0:1,duration:function(t,i){return i?settings.block.duration/3:1},delay:function(t,i){return i?e.isHidden?100:.5*settings.block.duration+settings.block.delay:e.isHidden?settings.block.duration+settings.block.delay:settings.block.delay}}}).finished}},{key:"toggleBlock_2",value:function(){var e=this;return anime.remove(this.DOM.block_2),anime({targets:[this.DOM.block_2,this.DOM.block_2.children],duration:settings.block_2.duration,delay:settings.block_2.delay,easing:settings.block_2.easing,translateX:this.isHidden?["0%",this.direction===settings.block_2.direction?-1*(settings.block_2.horizontal?100:0)+"%":(settings.block_2.horizontal?100:0)+"%"]:[this.direction===settings.block_2.direction?(settings.block_2.horizontal?100:0)+"%":-1*(settings.block_2.horizontal?100:0)+"%","0%"],translateY:this.isHidden?["0%",this.direction===settings.block_2.direction?-1*(settings.block_2.horizontal?0:100)+"%":(settings.block_2.horizontal?0:100)+"%"]:[this.direction===settings.block_2.direction?(settings.block_2.horizontal?0:100)+"%":-1*(settings.block_2.horizontal?0:100)+"%","0%"],opacity:{value:this.isHidden?0:1,duration:function(t,i){return i?settings.block_2.duration/3:1},delay:function(t,i){return i?e.isHidden?100:.5*settings.block_2.duration+settings.block_2.delay:e.isHidden?settings.block_2.duration+settings.block_2.delay:settings.block_2.delay}}}).finished}},{key:"inlineView",value:function(){$(this.DOM.img).length&&$(this.DOM.img_2).length&&($(this.DOM.img).parent().addClass("img-l"),$(this.DOM.img_2).parent().addClass("img-r")),$(this.DOM.block).length&&$(this.DOM.block_2).length&&($(this.DOM.block).parent().addClass("block-l"),$(this.DOM.block_2).parent().addClass("block-r"))}},{key:"PageInAnimation",value:function(){if(mainView)return mainView=!1,$("body").addClass("no-pointer"),Promise.all([this.DOM.img&&this.pageInImg(),this.DOM.img_2&&this.pageInImg_2(),this.DOM.block&&this.pageInBlock(),this.DOM.block_2&&this.pageInBlock_2(),this.DOM.topbar&&this.pageInTopBar(),this.DOM.pagination&&this.DOM.title&&this.DOM.navigation&&this.DOM.description_inner&&this.pageInOther()]).then(function(){mainView=!0,$("body").removeClass("no-pointer")})}},{key:"pageInBlock",value:function(){return anime({targets:this.DOM.block,duration:settings.pageInBlock.duration,delay:settings.pageInBlock.delay,easing:settings.pageInBlock.easing,translateX:["next"===settings.pageInBlock.direction?-1*(settings.pageInBlock.horizontal?100:0)+"%":(settings.pageInBlock.horizontal?100:0)+"%","0%"],translateY:["next"===settings.pageInBlock.direction?-1*(settings.pageInBlock.horizontal?0:100)+"%":(settings.pageInBlock.horizontal?0:100)+"%","0%"]}).finished}},{key:"pageInBlock_2",value:function(){return anime({targets:this.DOM.block_2,duration:settings.pageInBlock_2.duration,delay:settings.pageInBlock_2.delay,easing:settings.pageInBlock_2.easing,translateX:["next"===settings.pageInBlock_2.direction?-1*(settings.pageInBlock_2.horizontal?100:0)+"%":(settings.pageInBlock_2.horizontal?100:0)+"%","0%"],translateY:["next"===settings.pageInBlock_2.direction?-1*(settings.pageInBlock_2.horizontal?0:100)+"%":(settings.pageInBlock_2.horizontal?0:100)+"%","0%"]}).finished}},{key:"pageInImg",value:function(){return anime({targets:this.DOM.img,duration:settings.pageInImg.duration,delay:settings.pageInImg.delay,easing:settings.pageInImg.easing,translateX:["next"===settings.pageInImg.direction?-1*(settings.pageInImg.horizontal?100:0)+"%":(settings.pageInImg.horizontal?100:0)+"%","0%"],translateY:["next"===settings.pageInImg.direction?-1*(settings.pageInImg.horizontal?0:100)+"%":(settings.pageInImg.horizontal?0:100)+"%","0%"]}).finished}},{key:"pageInImg_2",value:function(){return anime({targets:this.DOM.img_2,duration:settings.pageInImg_2.duration,delay:settings.pageInImg_2.delay,easing:settings.pageInImg_2.easing,translateX:["next"===settings.pageInImg_2.direction?-1*(settings.pageInImg_2.horizontal?100:0)+"%":(settings.pageInImg_2.horizontal?100:0)+"%","0%"],translateY:["next"===settings.pageInImg_2.direction?-1*(settings.pageInImg_2.horizontal?0:100)+"%":(settings.pageInImg_2.horizontal?0:100)+"%","0%"]}).finished}},{key:"pageInTopBar",value:function(){return anime({targets:this.DOM.topbar,duration:settings.pageInTopBar.duration,delay:settings.pageInTopBar.delay,easing:settings.pageInTopBar.easing,translateY:["-100%","0%"]}).finished}},{key:"pageInOther",value:function(){return anime({targets:[this.DOM.title,this.DOM.pagination,this.DOM.navigation,this.DOM.description_inner],duration:settings.pageInOther.duration,delay:settings.pageInOther.delay,easing:settings.pageInOther.easing,translateY:["next"===settings.pageInOther.direction?"-10%":"10%","0%"],opacity:[0,1]}).finished}}]),i}(),Slideshow=function(){function i(t){_classCallCheck(this,i),this.DOM={},this.DOM.el=t,this.init()}return _createClass(i,[{key:"init",value:function(){this.DOM.pagination=this.DOM.el.querySelector(".section__index .section__index-inner"),this.DOM.navigation=this.DOM.el.querySelector(".section__nav"),this.DOM.navigation.prevCtrl=this.DOM.navigation.querySelector("button.section__nav-item--prev"),this.DOM.navigation.nextCtrl=this.DOM.navigation.querySelector("button.section__nav-item--next"),this.DOM.entries=Array.from(this.DOM.el.querySelectorAll(".section"),function(t){return new Entry(t)}),this.DOM.current=this.DOM.el.querySelector(".section--current"),this.entriesTotal=this.DOM.entries.length,this.currentPos=0,this.DOM.navigation.scrollDownCtrl=this.DOM.navigation.querySelector("button.section__nav-item--prev"),this.layout(),this.initEvents(),this.updateColor()}},{key:"layout",value:function(){this.currentEntry=this.DOM.entries[this.currentPos]}},{key:"initEvents",value:function(){var i=this;this.onPrevClick=function(){return i.navigate("prev")},this.onNextClick=function(){return i.navigate("next")},this.DOM.navigation.prevCtrl.addEventListener("click",this.onPrevClick),this.DOM.navigation.nextCtrl.addEventListener("click",this.onNextClick),$(".section--current").addClass("init"),document.addEventListener("wheel",function(t){return mainView?0<t.deltaY?i.onNextClick():i.onPrevClick():""}),this.onResize=function(){window.mobileView(),i.layout()},window.addEventListener("resize",debounce(function(){return i.onResize()},20))}},{key:"navigate",value:function(t){if(!this.isEntriesAnimating){this.isEntriesAnimating=!0,this.direction=t;var i=this.currentPos="next"===this.direction?this.currentPos<this.entriesTotal-1?this.currentPos+1:0:this.currentPos=0<this.currentPos?this.currentPos-1:this.entriesTotal-1,e=this.DOM.entries[i];this.update(e)}}},{key:"updateColor",value:function(){$(".changing,.init").hasClass("bg--dark")?$(".diff").addClass("color--light"):$(".diff").removeClass("color--light"),$(".changing,.init").hasClass("bg--light")?$(".diff").addClass("color--dark"):$(".diff").removeClass("color--dark")}},{key:"update",value:function(t){var i=this;Promise.all([i.currentEntry.hide(i.direction),t.show(i.direction),i.updatePageNumber()]).then(function(){$(i.currentEntry.DOM.el).removeClass("section--current"),$(t.DOM.el).addClass("section--current"),i.currentEntry=t,$(t.DOM.el).removeClass("changing"),i.isEntriesAnimating=!1}),$(".section--current").removeClass("init"),$(t.DOM.el).addClass("changing"),this.updateColor()}},{key:"updatePageNumber",value:function(){var i=this;anime.remove(this.DOM.pagination);var e=!1;return anime({targets:this.DOM.pagination,duration:0,translateY:[{value:"next"===this.direction?"100%":"-100%"},{value:["next"===this.direction?"-100%":"100%","0%"],delay:settings.pagination.duration}],opacity:[{value:0},{value:[0,1]}],update:function(t){50<=t.progress&&!e&&(e=!0,i.DOM.pagination.innerHTML="0"+(i.currentPos+1))}}).finished}},{key:"animate",value:function(t){return anime.remove(t.targets),anime(t).finished}}]),i}();imagesLoaded(document.querySelectorAll(".section__img-inner"),{background:!0},function(){new Slideshow(document.querySelector(".section-wrapper")),new Menu(document.querySelector("body")),setTimeout(function(){$(".loader").addClass("hidden")},100)});